<!DOCTYPE html>
<html>
	<head>
		<title>snake test</title>
	</head>

	<body>
		<canvas id="snake"></canvas>
	</body>

	<script type="text/javascript">
		var canvas = document.getElementById("snake");
		var ctx = canvas.getContext('2d');
		canvas.width = 400;
		canvas.height = 300;
		ctx.strokeStyle = "#c9c9c9";
		var snakeList = [{x:45,y:30},{x:30,y:30}];
		drawGrid(15,15);
		// move();

		function drawGrid(stepX,stepY){
			for(var i = stepY+0.5; i<ctx.canvas.height;i+=stepY){
				ctx.beginPath();
            	ctx.moveTo(0, i);
            	ctx.lineTo(ctx.canvas.width, i);
				ctx.stroke();
			}

			for(var i = stepX+0.5; i<ctx.canvas.width;i+=stepX){
				ctx.beginPath();
            	ctx.moveTo(i, 0);
            	ctx.lineTo(i, ctx.canvas.height);
				ctx.stroke();
			}

			ctx.strokeStyle="#c9c9c9";
			ctx.strokeRect(0,0,ctx.canvas.width,ctx.canvas.height);
		}

		
		function drawSnake(){
			ctx.fillStyle="#e0e0e0";
			ctx.strokeStyle="#4d89dc";
			snakeList.forEach(function(v){
				ctx.fillRect(v.x,v.y,15,15);
				ctx.strokeRect(v.x,v.y,15,15);
			})
		}

		function cleanCanvas(){
			ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
			drawGrid(15,15);
		}

		function moveSnake(xStep,yStep){
			var firstNode = snakeList[0];
			snakeList.unshift({x:firstNode.x+xStep,y:firstNode.y+yStep});
			snakeList.pop();
		}

		function move(){
			setTimeout(function(){
				cleanCanvas();
				moveSnake(15,0);
				drawSnake();
				move();
			},200)
		}
	</script>
</html>